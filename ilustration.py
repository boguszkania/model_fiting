import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

fog_data_x = [5000, 10000, 15000, 20000, 25000, 30000, 35000, 38743, 45000, 50000, 55000, 60000, 65000, 70000, 75000, 80000]
fog_data_y = [0.021199999999999997, 0.014900000000000024, 0.012199999999999989, 0.010249999999999981, 0.009280000000000066, 0.0086666666666666, 0.008000000000000007,
              0.007665900936943415, 0.00691111111111109, 0.006619999999999959, 0.006418181818181878, 0.005850000000000022, 0.005569230769230771, 0.005742857142857161,
              0.005360000000000031,0.005099999999999993]

snow_data_x = [2000, 4000, 6000, 8000, 10000, 12000, 14000, 16000, 18000, 20814, 22000, 24000, 26000, 28000, 30000, 32000, 34000, 36000, 38000, 40000, 42000]
snow_data_y = [0.04200000000000004, 0.030000000000000027, 0.024666666666666615, 0.02112500000000006, 0.019199999999999995, 0.01708333333333334, 0.015928571428571403, 0.015249999999999986,
               0.014000000000000012, 0.01297203805131164, 0.01295454545454544, 0.012166666666666659, 0.011538461538461497, 0.011285714285714343, 0.01090000000000002, 0.010624999999999996,
               0.010294117647058898, 0.009888888888888947, 0.009842105263157874, 0.009375000000000022, 0.009047619047619082]


early_snow_x = [500, 1500, 2500, 3500, 4500, 5500, 6500, 7500, 8500, 9500, 10500, 11500, 12500, 13500, 14500, 15500, 16500, 17500, 18500, 19500, 20500, 21500, 22500, 23500, 24500, 25500,
                26500, 27500, 28500, 29500, 30500, 31500, 32500, 33500, 34500, 35500, 36500, 37500, 38500, 39500, 40500, 41500, 42500, 43500, 44500, 45500, 46500, 47500, 48500, 49500]
early_snow_y = [0.08600000000000008, 0.048666666666666636, 0.03759999999999997, 0.03228571428571425, 0.02822222222222215, 0.026000000000000023, 0.023538461538461508, 0.0218666666666667,
                0.02047058823529413, 0.019052631578947432, 0.01828571428571435, 0.017478260869565276, 0.016800000000000037, 0.016444444444444373, 0.015724137931034554, 0.01529032258064511,
                0.014787878787878794, 0.014171428571428613, 0.01416216216216215, 0.01353846153846161, 0.012926829268292694, 0.01279069767441865, 0.012399999999999967, 0.012127659574468042,
                0.011877551020408217, 0.011647058823529344, 0.011622641509433929, 0.011309090909090935, 0.01129824561403503, 0.010983050847457654, 0.01072131147540989, 0.010666666666666602,
                0.010615384615384582, 0.010179104477611944, 0.010028985507246402, 0.010112676056338032, 0.009945205479452102, 0.009759999999999991, 0.009636363636363665, 0.009569620253164546,
                0.009481481481481424, 0.009325301204819225, 0.009294117647058897, 0.009057471264367734, 0.008898876404494382, 0.008769230769230751, 0.008731182795698955, 0.00848421052631576,
                0.008659793814433048, 0.008585858585858586]

early_2_snow_y = [0.08600000000000008, 0.048666666666666636, 0.038000000000000034, 0.031714285714285695, 0.027999999999999914, 0.02563636363636368, 0.023538461538461508, 0.022133333333333338,
                  0.020588235294117574, 0.01968421052631575, 0.01866666666666661, 0.01773913043478259, 0.017199999999999993, 0.016444444444444484, 0.01551724137931032, 0.015032258064516135,
                  0.01442424242424245, 0.014114285714285746, 0.013459459459459477, 0.013794871794871821, 0.012926829268292694, 0.01297674418604644, 0.012844444444444436, 0.012553191489361737,
                  0.01208163265306128, 0.01203921568627453, 0.011547169811320757, 0.011490909090909107, 0.011122807017543868, 0.011152542372881324, 0.010950819672131074, 0.01076190476190475,
                  0.010523076923076968, 0.010537313432835926, 0.010057971014492795, 0.010112676056338032, 0.010027397260273907, 0.00983999999999996, 0.009792207792207797, 0.009645569620253203,
                  0.009456790123456793, 0.00946987951807221, 0.009247058823529497, 0.009057471264367845, 0.009101123595505634, 0.00896703296703294, 0.00898924731182793, 0.008715789473684232,
                  0.008329896907216527, 0.00848484848484854]


snow_past_x = snow_data_x[0:10]
snow_past_y = snow_data_y[0:10]
snow_prognosis_x = snow_data_x[9:21]
snow_prognosis_y = snow_data_y[9:21]

fog_past_x = fog_data_x[0:7]
fog_past_y = fog_data_y[0:7]
fog_prognosis_x = fog_data_x[6:16]
fog_prognosis_y = fog_data_y[6:16]


fig, ax = plt.subplots(1, figsize=(10, 5))
ax.plot(snow_past_x, snow_past_y, color="peru", linewidth=2, label="snow data, obtained", zorder=3)
ax.plot(snow_prognosis_x, snow_prognosis_y, color="peru", dashes=[3, 1], linewidth=2, label="snow data, prognosis", zorder=4)
ax.plot(early_snow_x, early_snow_y, color="wheat", linewidth=5, label="snow data, early prognosis", zorder=2, alpha=1.0, solid_capstyle='round')
#ax.plot(fog_past_x, fog_past_y, color="dodgerblue", linewidth=2, label="fog data, obtained")
#ax.plot(fog_prognosis_x, fog_prognosis_y, color="dodgerblue", dashes=[3,1], linewidth=2, label="fog data, prognosis")


f = ticker.ScalarFormatter(useOffset=False, useMathText=True)
g = lambda x, pos: "${}$".format(f._formatSciNotation('%1.10e' % x))
ax.yaxis.set_major_formatter(ticker.FuncFormatter(lambda y, _: '{:.1%}'.format(y)))
ax.xaxis.set_minor_locator(ticker.AutoMinorLocator())
ax.yaxis.set_minor_locator(ticker.AutoMinorLocator())
ax.xaxis.set_major_formatter(ticker.FuncFormatter(g))
plt.grid(alpha=0.2, which='minor')
plt.grid(alpha=0.5, which='major')
plt.xlim((0, 50000))
ax.legend(loc='upper right', fontsize='12', framealpha=1.0, labelspacing=0.7, handletextpad=1.2, borderaxespad=1, borderpad=1.0)
ax.set_xlabel("number of data frames", fontsize=12)
ax.set_ylabel("confidence interval width", fontsize=12)
ax.tick_params(labelsize=12)
fig.suptitle("Audi zFAS confidence intervals widths for obj_0 IoU performance;\nexample of accuracy of early prognosis based on 5% of the obtained data", fontsize=16)
plt.show()
